<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SongMatch - 명곡 비교 분석기</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎧 SongMatch</h1>
            <p>두 곡을 비교해서 어떤 곡이 더 명곡인지 알아보세요!</p>
            <button class="interpret-button" id="interpret-btn">🎵 곡 해석</button>
        </header>

        <main>
            <div class="search-section">
                <div class="song-input">
                    <h3>첫 번째 곡</h3>
                    <div class="search-wrapper">
                        <input type="text" id="song1-input" placeholder="곡명 또는 아티스트를 입력하세요">
                        <div class="autocomplete-dropdown" id="song1-dropdown"></div>
                    </div>
                    <div class="selected-song" id="song1-selected"></div>
                </div>

                <div class="vs-divider">VS</div>

                <div class="song-input">
                    <h3>두 번째 곡</h3>
                    <div class="search-wrapper">
                        <input type="text" id="song2-input" placeholder="곡명 또는 아티스트를 입력하세요">
                        <div class="autocomplete-dropdown" id="song2-dropdown"></div>
                    </div>
                    <div class="selected-song" id="song2-selected"></div>
                </div>
            </div>

            <button id="compare-btn" class="compare-button" disabled>비교하기</button>

            <div class="results-section" id="results" style="display: none;">
                <div class="winner-announcement" id="winner-text"></div>
                
                <div class="score-comparison">
                    <div class="song-score" id="song1-score">
                        <h4 class="song-title"></h4>
                        <div class="total-score"></div>
                        <div class="score-breakdown"></div>
                    </div>
                    
                    <div class="song-score" id="song2-score">
                        <h4 class="song-title"></h4>
                        <div class="total-score"></div>
                        <div class="score-breakdown"></div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="comparison-chart"></canvas>
                </div>
            </div>
        </main>

        <div class="faq-section">
            <h3 class="faq-title" onclick="toggleFAQ()">
                <span>❓ 점수 산정 기준 안내</span>
                <span class="faq-toggle" id="faq-toggle">▼</span>
            </h3>
            <div class="faq-content" id="faq-content" style="display: none;">
                <div class="faq-item">
                    <h4>🎵 곡 점수 (80점)</h4>
                    <ul>
                        <li><strong>Spotify 인기도 (40점)</strong>
                            <ul>
                                <li>0-20: 8점 / 21-40: 16점 / 41-60: 24점 / 61-80: 32점 / 81-100: 40점</li>
                                <li>최근 재생 빈도를 기반으로 한 실시간 인기도 지표</li>
                            </ul>
                        </li>
                        <li><strong>YouTube 조회수 (40점)</strong>
                            <ul>
                                <li>1천만 미만: 8점 / 1천만-5천만: 16점 / 5천만-2억: 24점 / 2억-10억: 32점 / 10억 이상: 40점</li>
                                <li>공식 뮤직비디오의 누적 조회수</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="faq-item">
                    <h4>🎤 아티스트 점수 (20점)</h4>
                    <ul>
                        <li><strong>Spotify 아티스트 인기도 (10점)</strong>
                            <ul>
                                <li>0-20: 2점 / 21-40: 4점 / 41-60: 6점 / 61-80: 8점 / 81-100: 10점</li>
                                <li>아티스트의 전반적인 Spotify 인기도</li>
                            </ul>
                        </li>
                        <li><strong>YouTube 구독자 (10점)</strong>
                            <ul>
                                <li>10만 미만: 2점 / 10만-100만: 4점 / 100만-500만: 6점 / 500만-1천만: 8점 / 1천만 이상: 10점</li>
                                <li>아티스트 공식 YouTube 채널 구독자 수</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="faq-item">
                    <h4>🏆 수상 정보는 왜 점수에 반영하지 않나요?</h4>
                    <p>그래미를 비롯한 주요 시상식 수상 정보는 아티스트의 전체 경력을 반영하므로, 개별 곡의 인기도를 평가하는 데는 적합하지 않습니다. 
                    따라서 참고 정보로만 제공하며, 실제 점수에는 반영하지 않습니다.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 곡 해석 모달 창 -->
    <div class="modal" id="interpret-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🎵 곡 해석</h2>
                <span class="close" id="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="song-search-section">
                    <input type="text" id="interpret-song-input" placeholder="해석할 곡명 또는 아티스트를 입력하세요">
                    <div class="autocomplete-dropdown" id="interpret-dropdown"></div>
                    <div class="selected-song" id="interpret-selected"></div>
                </div>
                
                <div class="interpretation-options">
                    <h3>해석 옵션</h3>
                    <label class="option-item">
                        <input type="radio" name="interpret-type" value="direct" checked>
                        <span>📝 직역 (단어 그대로)</span>
                    </label>
                    <label class="option-item">
                        <input type="radio" name="interpret-type" value="cultural">
                        <span>🌍 의역 (문화적 맥락 포함)</span>
                    </label>
                    <label class="option-item">
                        <input type="radio" name="interpret-type" value="hiphop">
                        <span>🎤 힙합 특화 (슬랭, 은유, 분위기 해석)</span>
                    </label>
                </div>
                
                <button class="interpret-start-btn" id="start-interpret" disabled>해석 시작</button>
                
                <div class="interpretation-result" id="interpret-result" style="display: none;">
                    <div class="result-header">
                        <h3 id="result-song-title"></h3>
                        <p id="result-artist"></p>
                    </div>
                    <div class="lyrics-section">
                        <div class="original-lyrics">
                            <h4>원문 가사</h4>
                            <div id="original-text"></div>
                        </div>
                        <div class="translated-lyrics">
                            <h4>한국어 해석</h4>
                            <div id="translated-text"></div>
                        </div>
                    </div>
                    <div class="song-meaning">
                        <h4>곡의 의미 & 배경</h4>
                        <div id="song-context"></div>
                    </div>
                </div>
                
                <div class="loading" id="interpret-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>곡을 해석하고 있습니다...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        function toggleFAQ() {
            const content = document.getElementById('faq-content');
            const toggle = document.getElementById('faq-toggle');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = '▲';
            } else {
                content.style.display = 'none';
                toggle.textContent = '▼';
            }
        }
    </script>
</body>
</html>